<!DOCTYPE html>
<html>
    <head>
        <title>Kendo UI and Backbone</title>
        <link href="http://cdn.kendostatic.com/2014.2.716/styles/kendo.common.min.css" rel="stylesheet" />
        <link href="http://cdn.kendostatic.com/2014.2.716/styles/kendo.default.min.css" rel="stylesheet" />
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script>
        <script type="text/javascript" src="//da7xgjtj801h2.cloudfront.net/2014.2.716/js/kendo.all.min.js"></script>
        <script src="js/build/web/kendo.backbone.js"></script>
    </head>
    <body>
        <h3>Grid</h3>
        <div id="grid">
        </div>

        <h3>Backbone collection</h3>
        <pre id="log">
        </pre>
        <script>
                var Product = Backbone.Model.extend({
                    idAttribute: "ProductID"
                });

                var ProductCollection = Backbone.Collection.extend({
                    model: Product
                });

                var products = new ProductCollection(
                [
                    { ProductID: 1, Name: "Food"}, { ProductID: 2, Name: "Coffee"}
                ]);

                var ProductWrapper = kendo.backboneModel(Product, {
                    ProductID: { type: "number" },
                    Name: { type: "string" }
                });

                var ProductCollectionWrapper = kendo.backboneCollection(ProductWrapper);

                products.on("change remove", function() {
                    $("#log").text(kendo.stringify(products.toJSON()));
                });

                $("#log").text(kendo.stringify(products.toJSON()));

                $("#grid").kendoGrid({
                    editable: "popup",
                    toolbar: ["create"],
                    columns: ["ProductID", "Name", { command: ["edit", "destroy"] }],
                    dataSource: {
                        schema: {
                            model: ProductWrapper
                        },
                        data: new ProductCollectionWrapper(products)
                    }
                });
        </script>
    </body>
</html>
